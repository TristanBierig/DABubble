<div class="message__input">
  <emoji-mart
    *ngIf="emojiService.openEmojiPicker === 'Main'"
    class="emoji-picker"
    [darkMode]="false"
    (emojiClick)="addEmoji($event)"
    [perLine]="7"
    [isNative]="true"
    [emojiTooltip]="true"
    [emoji]="''"
  ></emoji-mart>

  <!-- Msg Input -->
  <textarea
    [(ngModel)]="msgPayload"
    name="msgInput"
    id="msgInput"
    type="text"
    placeholder="{{ placeholderText }}"
  ></textarea>

  <!-- File Preview -->
  <div class="file-upload__container">
    <div
      [ngClass]="fileToUpload ? 'd-block' : 'd-none'"
      class="file-upload__wrapper"
    >
      <button
        (click)="cancelUpload()"
        mat-mini-fab
        color="warn"
        class="file-upload__cancel-btn"
      >
        <mat-icon>close</mat-icon>
      </button>
      <img
        src=""
        id="filePreview"
        [ngClass]="fileToUpload ? 'file-upload__thumbnail' : ''"
        alt=""
      />
    </div>
    <span class="file-upload__file-name">{{ fileName }}</span>
  </div>

  <!-- Button row menu -->
  <div class="message-input__btn-container">
    <div class="btn-container__extra-btn-wrapper">
      <!-- Upload -->
      <button
        (click)="openFileUpload()"
        mat-icon-button
        class="btn__icon-wo-bg"
        aria-label="Icon button to add data files to the message"
      >
        <input
          type="file"
          accept="image/*,.pdf"
          id="fileUpload"
          (change)="onFileChange($event)"
        />
        <mat-icon fontSet="material-icons-outlined">add</mat-icon>
      </button>

      <mat-divider [vertical]="true"></mat-divider>

      <!-- Emoji -->
      <button
        (click)="emojiService.toggleEmojiPicker('Main')"
        mat-icon-button
        class="btn__icon-wo-bg"
        [ngClass]="
          emojiService.openEmojiPicker === 'Main'
            ? 'btn__icon-wo-bg__focus'
            : ''
        "
        aria-label="Icon button to select emotes"
      >
        <mat-icon fontSet="material-icons-outlined"
          >sentiment_satisfied</mat-icon
        >
      </button>
      <!-- @-Link -->
      <button
        mat-icon-button
        aria-label="Icon button to link another user"
        class="btn__icon-wo-bg"
      >
        <mat-icon fontSet="material-icons-outlined">alternate_email</mat-icon>
      </button>
    </div>

    <div>
      <button
        (click)="sendMessage()"
        mat-icon-button
        class="btn__icon-wo-bg"
        aria-label="Icon button to send the message"
      >
        <mat-icon class="message-input__send-btn" fontSet="material-icons"
          >send</mat-icon
        >
      </button>
    </div>
  </div>
</div>
